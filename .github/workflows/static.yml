<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AAVE UCF | Member Rewards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .gold-gradient { background: linear-gradient(135deg, #D4AF37 0%, #F1C40F 100%); }
        .navy-bg { background-color: #1E3A5F; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [view, setView] = useState('dashboard'); // dashboard, leaderboard, admin
            const [userPoints, setUserPoints] = useState(0);
            const [events, setEvents] = useState([
                { id: 1, title: 'GBM #1 Welcome', code: 'UCF2024', points: 50 },
                { id: 2, title: 'Engineering Workshop', code: 'AAVEENG', points: 100 }
            ]);
            const [claims, setClaims] = useState([]);
            const [message, setMessage] = useState({ text: '', type: '' });

            // Initialize data from LocalStorage
            useEffect(() => {
                const savedClaims = localStorage.getItem('aave_claims');
                if (savedClaims) setClaims(JSON.parse(savedClaims));
            }, []);

            const handleClaim = (code) => {
                const event = events.find(e => e.code.toUpperCase() === code.toUpperCase());
                if (!event) {
                    setMessage({ text: 'Invalid Code!', type: 'error' });
                    return;
                }
                if (claims.find(c => c.eventId === event.id)) {
                    setMessage({ text: 'Already claimed!', type: 'error' });
                    return;
                }
                
                const newClaim = { eventId: event.id, title: event.title, points: event.points, date: new Date().toLocaleDateString() };
                const updatedClaims = [...claims, newClaim];
                setClaims(updatedClaims);
                localStorage.setItem('aave_claims', JSON.stringify(updatedClaims));
                setMessage({ text: `Success! +${event.points} pts`, type: 'success' });
            };

            const totalPoints = claims.reduce((acc, curr) => acc + curr.points, 0);

            return (
                <div className="min-h-screen">
                    {/* Navigation */}
                    <nav className="navy-bg text-white p-4 shadow-lg">
                        <div className="max-w-5xl mx-auto flex justify-between items-center">
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-8 gold-gradient rounded-full flex items-center justify-center font-bold">A</div>
                                <span className="font-bold tracking-tight">AAVE <span className="text-[#D4AF37]">UCF</span></span>
                            </div>
                            <div className="flex gap-6 text-sm font-medium">
                                <button onClick={() => setView('dashboard')} className={view === 'dashboard' ? 'text-[#D4AF37]' : ''}>Dashboard</button>
                                <button onClick={() => setView('leaderboard')} className={view === 'leaderboard' ? 'text-[#D4AF37]' : ''}>Leaderboard</button>
                                <button onClick={() => setView('admin')} className={view === 'admin' ? 'text-[#D4AF37]' : ''}>Admin</button>
                            </div>
                        </div>
                    </nav>

                    <main className="max-w-5xl mx-auto p-6">
                        {view === 'dashboard' && (
                            <div className="space-y-6">
                                {/* Stats Grid */}
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div className="glass-card p-6 rounded-2xl shadow-sm border-l-4 border-[#D4AF37]">
                                        <p className="text-gray-500 text-sm">Total Points</p>
                                        <h2 className="text-3xl font-bold text-slate-800">{totalPoints}</h2>
                                    </div>
                                    <div className="glass-card p-6 rounded-2xl shadow-sm border-l-4 border-blue-500">
                                        <p className="text-gray-500 text-sm">Events Attended</p>
                                        <h2 className="text-3xl font-bold text-slate-800">{claims.length}</h2>
                                    </div>
                                    <div className="glass-card p-6 rounded-2xl shadow-sm border-l-4 border-emerald-500">
                                        <p className="text-gray-500 text-sm">Current Rank</p>
                                        <h2 className="text-3xl font-bold text-slate-800">#1</h2>
                                    </div>
                                </div>

                                {/* Code Entry */}
                                <div className="bg-white p-8 rounded-2xl shadow-sm border border-gray-100 text-center">
                                    <h3 className="text-xl font-semibold mb-4 text-slate-800">Claim Event Points</h3>
                                    <div className="flex max-w-md mx-auto gap-2">
                                        <input 
                                            id="code-input"
                                            type="text" 
                                            placeholder="Enter Event Code" 
                                            className="flex-1 px-4 py-3 border rounded-xl focus:ring-2 ring-blue-500 outline-none uppercase"
                                        />
                                        <button 
                                            onClick={() => handleClaim(document.getElementById('code-input').value)}
                                            className="navy-bg text-white px-6 py-3 rounded-xl font-bold hover:bg-slate-700 transition"
                                        >
                                            Claim
                                        </button>
                                    </div>
                                    {message.text && (
                                        <p className={`mt-4 font-medium ${message.type === 'success' ? 'text-emerald-600' : 'text-red-500'}`}>
                                            {message.text}
                                        </p>
                                    )}
                                </div>

                                {/* Activity History */}
                                <div className="bg-white rounded-2xl shadow-sm overflow-hidden">
                                    <div className="p-4 border-b font-semibold text-slate-700">Recent Activity</div>
                                    <div className="divide-y">
                                        {claims.length > 0 ? claims.map((c, i) => (
                                            <div key={i} className="p-4 flex justify-between items-center hover:bg-gray-50">
                                                <div>
                                                    <p className="font-medium text-slate-800">{c.title}</p>
                                                    <p className="text-xs text-gray-400">{c.date}</p>
                                                </div>
                                                <span className="text-emerald-600 font-bold">+{c.points} pts</span>
                                            </div>
                                        )) : <p className="p-8 text-center text-gray-400">No events claimed yet.</p>}
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'leaderboard' && (
                            <div className="space-y-8 animate-in fade-in">
                                <div className="text-center">
                                    <h2 className="text-3xl font-bold text-slate-800">Semester Leaderboard</h2>
                                    <p className="text-gray-500">Top performers win the end-of-semester award!</p>
                                </div>
                                
                                {/* Podium */}
                                <div className="flex justify-center items-end gap-4 py-8">
                                    <div className="flex flex-col items-center">
                                        <div className="w-16 h-16 rounded-full bg-gray-200 border-4 border-slate-300 mb-2 flex items-center justify-center font-bold">2</div>
                                        <div className="w-24 h-32 bg-slate-300 rounded-t-lg flex items-center justify-center font-bold text-white">2nd</div>
                                    </div>
                                    <div className="flex flex-col items-center">
                                        <i className="fa-solid fa-crown text-[#D4AF37] text-2xl mb-1"></i>
                                        <div className="w-20 h-20 rounded-full bg-yellow-100 border-4 border-[#D4AF37] mb-2 flex items-center justify-center font-bold">1</div>
                                        <div className="w-28 h-44 gold-gradient rounded-t-lg flex items-center justify-center font-bold text-white shadow-lg">1st</div>
                                    </div>
                                    <div className="flex flex-col items-center">
                                        <div className="w-16 h-16 rounded-full bg-orange-100 border-4 border-orange-300 mb-2 flex items-center justify-center font-bold">3</div>
                                        <div className="w-24 h-24 bg-orange-200 rounded-t-lg flex items-center justify-center font-bold text-white">3rd</div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-2xl shadow-sm overflow-hidden">
                                    <table className="w-full text-left">
                                        <thead className="bg-gray-50 text-xs uppercase text-gray-500 font-bold">
                                            <tr>
                                                <th className="p-4">Rank</th>
                                                <th className="p-4">Member</th>
                                                <th className="p-4 text-right">Points</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y">
                                            <tr className="bg-blue-50">
                                                <td className="p-4 font-bold">#1</td>
                                                <td className="p-4 font-medium">You (Current User)</td>
                                                <td className="p-4 text-right font-bold text-blue-700">{totalPoints}</td>
                                            </tr>
                                            <tr>
                                                <td className="p-4">#2</td>
                                                <td className="p-4">Sebastian R.</td>
                                                <td className="p-4 text-right">450</td>
                                            </tr>
                                            <tr>
                                                <td className="p-4">#3</td>
                                                <td className="p-4">Maria V.</td>
                                                <td className="p-4 text-right">380</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {view === 'admin' && (
                            <div className="max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-sm">
                                <h2 className="text-2xl font-bold mb-6 text-slate-800">Admin Panel</h2>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium mb-1">Event Title</label>
                                        <input type="text" className="w-full p-3 border rounded-xl bg-gray-50" placeholder="e.g. Resume Workshop" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium mb-1">Secret Code</label>
                                        <input type="text" className="w-full p-3 border rounded-xl bg-gray-50 uppercase" placeholder="e.g. CAREER24" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium mb-1">Points Value</label>
                                        <input type="number" className="w-full p-3 border rounded-xl bg-gray-50" placeholder="50" />
                                    </div>
                                    <button className="w-full gold-gradient text-white py-4 rounded-xl font-bold shadow-md hover:opacity-90 transition">
                                        Generate & Save Event
                                    </button>
                                </div>
                            </div>
                        )}
                    </main>
                    
                    <footer className="text-center py-10 text-gray-400 text-sm">
                        Â© 2024 American Association of Venezuelan Engineers at UCF
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
